import{r as h,x as d,y as n,z as e,O as o,C as A,K as i,aW as X,Q as z,ac as Y,L as y,P as l,aP as Fe,a_ as _e,c as Ce,o as Te,q as Ge,Z as He,u as p,I as Je,S as J,aq as x,al as q,aX as B,R as Ue,J as Xe,T as Ye,Y as Ze}from"./vue-vendor-DMOLwvvm.js";import{b1 as et,b2 as tt,_ as at,s as m,b3 as rt,b4 as st,b5 as lt,b6 as ot,b7 as nt,b8 as dt,b9 as Me,ba as it,bb as ut,bc as gt,bd as ct,be as ft}from"./index-CRxSkjgZ.js";import{C as bt}from"./ConfirmModal-Bwq7ANRn.js";import"./vendor-CSA95d8J.js";import"./element-plus-BS6u3EDt.js";const pt={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},mt={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},yt={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all dark:bg-gray-800 sm:my-8 sm:w-full sm:max-w-2xl sm:align-middle"},xt={class:"px-4 py-6 sm:px-6"},vt={class:"mb-6"},kt={class:"flex space-x-4"},ht={class:"mb-6"},wt={class:"mb-6"},St={class:"grid grid-cols-1 gap-3 sm:grid-cols-2"},Ct=["onClick"],Tt={class:"flex items-center justify-between"},Ut={class:"font-medium text-gray-900 dark:text-white"},Mt={key:0,class:"rounded-full bg-yellow-100 px-2 py-0.5 text-xs font-bold text-yellow-800"},At={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},It={key:0,class:"absolute right-2 top-2 text-green-600"},$t={class:"mb-6 rounded-md bg-gray-50 p-4 font-mono text-xs text-gray-600 dark:bg-gray-900 dark:text-gray-400"},Bt={class:"bg-gray-50 px-4 py-3 dark:bg-gray-700 sm:flex sm:flex-row-reverse sm:px-6"},Rt=["disabled"],Et={__name:"SmartRoutingWizard",emits:["close","success"],setup($,{emit:R}){const D=h("global"),U=h("*"),f=h(""),K=[{id:"ccr/glm-4.7",name:"GLM 4.7",provider:"Zhipu AI / OpenRouter",bestDeal:!0},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro",provider:"Google Vertex AI"},{id:"claude-3-5-sonnet-20241022",name:"Claude 3.5 Sonnet",provider:"Anthropic Official"},{id:"deepseek-chat",name:"DeepSeek V3",provider:"DeepSeek"}],w=R,g=async()=>{try{const S={[U.value]:f.value};w("success",{scope:D.value,mapping:S}),w("close")}catch(S){console.error(S)}};return(S,v)=>(n(),d("div",pt,[e("div",mt,[v[10]||(v[10]=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),v[11]||(v[11]=e("span",{class:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"},"​",-1)),e("div",yt,[v[9]||(v[9]=e("div",{class:"bg-gradient-to-r from-purple-600 to-indigo-600 px-4 py-6 sm:px-6"},[e("h3",{class:"text-xl font-bold leading-6 text-white",id:"modal-title"},[e("i",{class:"fas fa-magic mr-2"}),o(" Smart Routing Wizard ")]),e("p",{class:"mt-1 text-sm text-purple-100"}," Easily configure model overrides without editing JSON ")],-1)),e("div",xt,[e("div",vt,[v[4]||(v[4]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},"1. Where to apply?",-1)),e("div",kt,[e("button",{onClick:v[0]||(v[0]=b=>D.value="global"),class:A([D.value==="global"?"border-purple-500 bg-purple-100 text-purple-700 dark:border-purple-500 dark:bg-purple-900/30 dark:text-purple-300":"border-gray-200 bg-gray-50 text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400","flex-1 rounded-lg border-2 px-4 py-3 font-medium transition-colors"])}," Global (All Keys) ",2),e("button",{onClick:v[1]||(v[1]=b=>D.value="key"),class:A([D.value==="key"?"border-purple-500 bg-purple-100 text-purple-700 dark:border-purple-500 dark:bg-purple-900/30 dark:text-purple-300":"border-gray-200 bg-gray-50 text-gray-500 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-400","flex-1 rounded-lg border-2 px-4 py-3 font-medium transition-colors"])}," Specific API Key ",2)])]),e("div",ht,[v[6]||(v[6]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},"2. When client asks for...",-1)),i(e("select",{"onUpdate:modelValue":v[2]||(v[2]=b=>U.value=b),class:"w-full rounded-md border-gray-300 py-2 shadow-sm focus:border-purple-500 focus:ring-purple-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},v[5]||(v[5]=[e("option",{value:"*"},"All Models (Wildcard *)",-1),e("option",{value:"claude-3-5-sonnet-*"},"Claude 3.5 Sonnet (Any Version)",-1),e("option",{value:"claude-3-opus-*"},"Claude 3 Opus (Any Version)",-1),e("option",{value:"gpt-4-*"},"GPT-4 (Any Version)",-1)]),512),[[X,U.value]])]),e("div",wt,[v[8]||(v[8]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"},"3. Redirect to...",-1)),e("div",St,[(n(),d(z,null,Y(K,b=>e("div",{key:b.id,onClick:C=>f.value=b.id,class:A([f.value===b.id?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-gray-600","relative cursor-pointer rounded-lg border p-3 transition-colors hover:border-green-300"])},[e("div",Tt,[e("span",Ut,l(b.name),1),b.bestDeal?(n(),d("span",Mt,"BEST DEAL")):y("",!0)]),e("div",At,l(b.provider),1),f.value===b.id?(n(),d("div",It,v[7]||(v[7]=[e("i",{class:"fas fa-check-circle"},null,-1)]))):y("",!0)],10,Ct)),64))])]),e("div",$t,l(JSON.stringify({[U.value]:f.value},null,2)),1)]),e("div",Bt,[e("button",{onClick:g,disabled:!f.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-purple-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm"}," Apply Configuration ",8,Rt),e("button",{onClick:v[3]||(v[3]=b=>S.$emit("close")),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])]))}},Vt=Fe("settings",()=>{const $=h({siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,apiStatsNotice:{enabled:!1,title:"",content:""},updatedAt:null}),R=h(!1),D=h(!1),U=async()=>{R.value=!0;const b=await et();return b.success&&($.value={...$.value,...b.data},w()),R.value=!1,b},f=async b=>{D.value=!0;const C=await tt(b);return C.success&&($.value={...$.value,...C.data},w()),D.value=!1,C},K=async()=>{const b={siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,apiStatsNotice:{enabled:!1,title:"",content:""},updatedAt:null};return $.value={...b},await f(b)},w=()=>{if($.value.siteName&&(document.title=`${$.value.siteName} - 管理后台`),$.value.siteIconData||$.value.siteIcon){const b=document.querySelector('link[rel="icon"]')||document.createElement("link");b.rel="icon",b.href=$.value.siteIconData||$.value.siteIcon,document.querySelector('link[rel="icon"]')||document.head.appendChild(b)}};return{oemSettings:$,loading:R,saving:D,loadOemSettings:U,saveOemSettings:f,resetOemSettings:K,applyOemSettings:w,formatDateTime:b=>b?new Date(b).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",validateIconFile:b=>{const C=[];return b.size>350*1024&&C.push("图标文件大小不能超过 350KB"),["image/x-icon","image/png","image/jpeg","image/jpg","image/svg+xml"].includes(b.type)||C.push("不支持的文件类型，请选择 .ico, .png, .jpg 或 .svg 文件"),{isValid:C.length===0,errors:C}},fileToBase64:b=>new Promise((C,F)=>{const _=new FileReader;_.onload=ae=>C(ae.target.result),_.onerror=F,_.readAsDataURL(b)})}}),Dt={class:"settings-container"},Qt={class:"card p-4 sm:p-6"},jt={class:"mb-4 sm:mb-6"},qt={class:"mb-1 text-lg font-bold text-gray-900 dark:text-gray-100 sm:mb-2 sm:text-xl"},Nt={class:"text-sm text-gray-600 dark:text-gray-400 sm:text-base"},Pt={class:"mb-6"},Wt={class:"flex space-x-8"},Lt={key:0,class:"py-12 text-center"},Ot={class:"text-gray-500 dark:text-gray-400"},zt={key:1},Kt={class:"table-container hidden sm:block"},Ft={class:"min-w-full"},_t={class:"divide-y divide-gray-200/50 dark:divide-gray-600/50"},Gt={class:"table-row"},Ht={class:"w-48 whitespace-nowrap px-6 py-4"},Jt={class:"flex items-center"},Xt={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},Yt={class:"text-xs text-gray-500 dark:text-gray-400"},Zt={class:"px-6 py-4"},ea=["placeholder"],ta={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},aa={class:"table-row"},ra={class:"w-48 whitespace-nowrap px-6 py-4"},sa={class:"flex items-center"},la={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},oa={class:"text-xs text-gray-500 dark:text-gray-400"},na={class:"px-6 py-4"},da={class:"space-y-3"},ia={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},ua=["src"],ga={class:"text-sm text-gray-600 dark:text-gray-400"},ca={class:"ml-3 text-xs text-gray-500 dark:text-gray-400"},fa={class:"table-row"},ba={class:"w-48 whitespace-nowrap px-6 py-4"},pa={class:"flex items-center"},ma={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ya={class:"text-xs text-gray-500 dark:text-gray-400"},xa={class:"px-6 py-4"},va={class:"flex items-center"},ka={class:"inline-flex cursor-pointer items-center"},ha={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},wa={class:"table-row"},Sa={class:"px-6 py-4"},Ca={class:"border-b border-gray-100 dark:border-gray-700"},Ta={class:"px-6 py-4"},Ua={class:"flex items-center"},Ma={class:"inline-flex cursor-pointer items-center"},Aa={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},Ia={key:0,class:"mt-3 space-y-3"},$a={class:"px-6 py-6",colspan:"2"},Ba={class:"flex items-center justify-between"},Ra={class:"flex gap-3"},Ea=["disabled"],Va={key:0,class:"loading-spinner mr-2"},Da={key:1,class:"fas fa-save mr-2"},Qa=["disabled"],ja={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},qa={class:"space-y-4 sm:hidden"},Na={class:"glass-card p-4"},Pa={class:"glass-card p-4"},Wa={class:"space-y-3"},La={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},Oa=["src"],za={class:"glass-card p-4"},Ka={class:"space-y-2"},Fa={class:"inline-flex cursor-pointer items-center"},_a={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},Ga={class:"glass-card p-4"},Ha={class:"flex flex-col gap-3"},Ja=["disabled"],Xa={key:0,class:"loading-spinner mr-2"},Ya={key:1,class:"fas fa-save mr-2"},Za=["disabled"],er={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400"},tr={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},ar={class:"flex items-center justify-between"},rr={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},sr={class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},lr={class:"relative inline-flex cursor-pointer items-center"},or={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},nr={class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},dr={class:"space-y-3"},ir={class:"font-medium text-gray-700 dark:text-gray-300"},ur={class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},gr={class:"relative inline-flex cursor-pointer items-center"},cr=["onUpdate:modelValue"],fr={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},br={class:"mb-4 flex items-center justify-between"},pr={class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},mr={key:0,class:"space-y-4"},yr={class:"flex items-start justify-between"},xr={class:"flex-1"},vr={class:"flex items-center"},kr={class:"font-semibold text-gray-800 dark:text-gray-200"},hr={class:"text-sm text-gray-500 dark:text-gray-400"},wr={class:"mt-3 space-y-1 text-sm"},Sr={key:0,class:"flex items-center text-gray-600 dark:text-gray-400"},Cr={class:"truncate"},Tr={key:1,class:"flex items-center text-gray-600 dark:text-gray-400"},Ur={class:"truncate"},Mr={key:2,class:"flex items-center text-gray-600 dark:text-gray-400"},Ar={class:"truncate"},Ir={key:3,class:"flex items-center text-gray-600 dark:text-gray-400"},$r={class:"truncate"},Br={key:4,class:"flex items-center text-gray-600 dark:text-gray-400"},Rr={class:"truncate"},Er={key:5,class:"flex items-center text-gray-600 dark:text-gray-400"},Vr={class:"truncate"},Dr={key:6,class:"flex items-center text-gray-600 dark:text-gray-400"},Qr={class:"ml-4 flex items-center space-x-2"},jr={class:"relative inline-flex cursor-pointer items-center"},qr=["checked","onChange"],Nr=["title","onClick"],Pr=["title","onClick"],Wr=["title","onClick"],Lr={key:1,class:"py-8 text-center text-gray-500 dark:text-gray-400"},Or={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},zr={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Kr={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Fr={class:"mb-6 flex items-center justify-between"},_r={class:"space-y-4"},Gr={key:0,class:"grid gap-3"},Hr={class:"flex items-center gap-3"},Jr={class:"font-mono text-sm text-blue-600 dark:text-blue-400"},Xr={class:"font-mono text-sm text-green-600 dark:text-green-400"},Yr=["onClick"],Zr={key:1,class:"text-sm italic text-gray-500"},es={key:1,class:"py-12 text-center"},ts={key:2},as={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},rs={class:"flex items-center justify-between"},ss={class:"relative inline-flex cursor-pointer items-center"},ls={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},os={class:"flex items-center justify-between"},ns={class:"relative inline-flex cursor-pointer items-center"},ds={key:0,class:"mt-6 space-y-4"},is={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},us={class:"flex items-center justify-between"},gs={class:"relative inline-flex cursor-pointer items-center"},cs={key:0,class:"mt-6 space-y-4"},fs={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},bs={class:"flex items-center justify-between"},ps={class:"relative inline-flex cursor-pointer items-center"},ms={key:0,class:"mt-6 space-y-4"},ys={key:0,class:"rounded-lg bg-gray-50 p-4 text-sm text-gray-500 dark:bg-gray-700/50 dark:text-gray-400"},xs={key:0,class:"ml-2"},vs={key:0,class:"py-12 text-center"},ks={key:1},hs={class:"mb-6 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 p-6 dark:from-blue-900/20 dark:to-indigo-900/20"},ws={class:"flex items-start"},Ss={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Cs={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Ts={class:"mb-4 flex items-center justify-between"},Us=["disabled"],Ms={class:"space-y-4"},As={class:"flex items-center"},Is={class:"font-medium text-gray-900 dark:text-gray-100"},$s={class:"text-xs text-gray-500 dark:text-gray-400"},Bs={key:0,class:"ml-2 rounded bg-blue-100 px-1.5 py-0.5 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300"},Rs={class:"flex items-center gap-3"},Es=["onUpdate:modelValue"],Vs={key:0,class:"mt-4 rounded-lg bg-gray-50 p-3 text-sm text-gray-500 dark:bg-gray-700/50 dark:text-gray-400"},Ds={key:0,class:"ml-2"},Qs={class:"dark:to-gray-750 relative border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 dark:border-gray-700 dark:from-gray-800"},js={class:"flex items-center justify-between"},qs={class:"flex items-center space-x-3"},Ns={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ps={class:"mt-0.5 text-sm text-gray-600 dark:text-gray-400"},Ws={class:"p-6"},Ls={class:"space-y-5"},Os={class:"relative"},zs=["disabled"],Ks={key:0,class:"mt-1 text-xs text-amber-600 dark:text-amber-400"},Fs={key:0},_s={class:"relative"},Gs={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},Hs={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-3"},Js={key:0,class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},Xs={class:"text-sm text-blue-700 dark:text-blue-300"},Ys={key:1,class:"space-y-5"},Zs={class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},el={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},tl={class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},al={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},rl={class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},sl={class:"ml-2 text-xs text-gray-500"},ll={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ol={class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},nl={class:"ml-2 text-xs text-gray-500"},dl={class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},il={class:"flex items-start rounded-lg bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"},ul={key:2,class:"space-y-5"},gl={class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},cl={key:3,class:"space-y-5"},fl={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},bl={key:4,class:"rounded-xl border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-900/50"},pl={class:"space-y-4"},ml={class:"flex items-center justify-between"},yl={class:"flex cursor-pointer items-center",for:"enableSign"},xl={key:0,class:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-700 dark:bg-green-900/50 dark:text-green-400"},vl={key:0},kl={class:"border-t border-gray-200 bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-gray-900/50"},hl={class:"flex items-center justify-between"},wl={class:"flex space-x-3"},Sl=["disabled"],Cl=["disabled"],Tl=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup($){const R=Vt(),{loading:D,saving:U,oemSettings:f}=_e(R),K=h(),w=h("branding"),g=h(!0),S=h(new AbortController),v=h(!1),b=h({title:"",message:"",type:"primary",confirmText:"确认",cancelText:"取消"}),C=h(null),F=(a,t,k="确认",s="取消",u="primary")=>new Promise(j=>{b.value={title:a,message:t,confirmText:k,cancelText:s,type:u},C.value=j,v.value=!0}),_=()=>{var a;v.value=!1,(a=C.value)==null||a.call(C,!0)},ae=()=>{var a;v.value=!1,(a=C.value)==null||a.call(C,!1)},P=Ce({get(){return!f.value.showAdminButton},set(a){f.value.showAdminButton=!a}}),Q=h(!1),N=h(!1),W=h(!1),L=h(!1),re={accountAnomaly:!0,quotaWarning:!0,systemError:!0,securityAlert:!0,rateLimitRecovery:!0},T=h({enabled:!1,platforms:[],notificationTypes:{...re},retrySettings:{maxRetries:3,retryDelay:1e3,timeout:1e4}}),se=h(!1),c=h({claudeCodeOnlyEnabled:!1,globalSessionBindingEnabled:!1,sessionBindingErrorMessage:"你的本地session已污染，请清理后使用。",sessionBindingTtlDays:1,userMessageQueueEnabled:!1,userMessageQueueDelayMs:200,userMessageQueueTimeoutMs:5e3,concurrentRequestQueueEnabled:!1,concurrentRequestQueueMaxSize:3,concurrentRequestQueueMaxSizeMultiplier:0,concurrentRequestQueueTimeoutMs:1e4,updatedAt:null,updatedBy:null}),le=h(!1),Z=h(!1),I=h({baseService:"claude",rates:{claude:1,codex:1,gemini:1,droid:1,bedrock:1,azure:1,ccr:1},updatedAt:null,updatedBy:null}),O=h(!1),E=h(null),r=h({type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1}),oe=Te(w,async a=>{g.value&&(a==="webhook"?await G():a==="claude"?await Ie():a==="serviceRates"&&await de())}),ne=Te(()=>r.value.type,a=>{Q.value=!1,N.value=!1,E.value||(a==="bark"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1):a==="smtp"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""):a==="telegram"?(r.value.url="",r.value.enableSign=!1,r.value.secret="",r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1,r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""):(r.value.deviceKey="",r.value.serverUrl="",r.value.level="",r.value.sound="",r.value.group="",r.value.host="",r.value.port=null,r.value.secure=!1,r.value.user="",r.value.pass="",r.value.from="",r.value.to="",r.value.timeout=null,r.value.ignoreTLS=!1,r.value.botToken="",r.value.chatId="",r.value.apiBaseUrl="",r.value.proxyUrl=""))}),Ae=Ce(()=>r.value.type==="bark"?!!r.value.deviceKey:r.value.type==="telegram"?!!(r.value.botToken&&r.value.chatId):r.value.type==="smtp"?!!(r.value.host&&r.value.user&&r.value.pass&&r.value.to):!!r.value.url&&!Q.value);Ge(async()=>{try{await R.loadOemSettings(),w.value==="webhook"&&await G(),w.value==="serviceRates"&&await de()}catch{m("加载设置失败","error")}}),He(()=>{g.value=!1,S.value&&S.value.abort(),oe&&oe(),ne&&ne(),O.value&&(O.value=!1,E.value=null)});const G=async()=>{if(g.value)try{const a=await rt({signal:S.value.signal});if(a.success&&g.value){const t=a.config||{};T.value={...t,notificationTypes:{...re,...t.notificationTypes||{}}}}}catch(a){if(a.name==="AbortError"||!g.value)return;m("获取webhook配置失败","error"),console.error(a)}},H=async()=>{if(g.value)try{const a={...T.value,notificationTypes:{...re,...T.value.notificationTypes||{}}};(await ot(a,{signal:S.value.signal})).success&&g.value&&(T.value=a,m("配置已保存","success"))}catch(a){if(a.name==="AbortError"||!g.value)return;m("保存配置失败","error"),console.error(a)}},Ie=async()=>{var a,t,k,s,u,j,ye,xe,ve,ke,he,we,Se;if(g.value){se.value=!0;try{const M=await ft({signal:S.value.signal});M.success&&g.value&&(c.value={claudeCodeOnlyEnabled:((a=M.config)==null?void 0:a.claudeCodeOnlyEnabled)??!1,globalSessionBindingEnabled:((t=M.config)==null?void 0:t.globalSessionBindingEnabled)??!1,sessionBindingErrorMessage:((k=M.config)==null?void 0:k.sessionBindingErrorMessage)||"你的本地session已污染，请清理后使用。",sessionBindingTtlDays:((s=M.config)==null?void 0:s.sessionBindingTtlDays)??1,userMessageQueueEnabled:((u=M.config)==null?void 0:u.userMessageQueueEnabled)??!1,userMessageQueueDelayMs:((j=M.config)==null?void 0:j.userMessageQueueDelayMs)??200,userMessageQueueTimeoutMs:((ye=M.config)==null?void 0:ye.userMessageQueueTimeoutMs)??5e3,concurrentRequestQueueEnabled:((xe=M.config)==null?void 0:xe.concurrentRequestQueueEnabled)??!1,concurrentRequestQueueMaxSize:((ve=M.config)==null?void 0:ve.concurrentRequestQueueMaxSize)??3,concurrentRequestQueueMaxSizeMultiplier:((ke=M.config)==null?void 0:ke.concurrentRequestQueueMaxSizeMultiplier)??0,concurrentRequestQueueTimeoutMs:((he=M.config)==null?void 0:he.concurrentRequestQueueTimeoutMs)??1e4,updatedAt:((we=M.config)==null?void 0:we.updatedAt)||null,updatedBy:((Se=M.config)==null?void 0:Se.updatedBy)||null})}catch(M){if(M.name==="AbortError"||!g.value)return;m("获取 Claude 转发配置失败","error"),console.error(M)}finally{g.value&&(se.value=!1)}}},V=async()=>{var a,t;if(g.value)try{const k={claudeCodeOnlyEnabled:c.value.claudeCodeOnlyEnabled,globalSessionBindingEnabled:c.value.globalSessionBindingEnabled,sessionBindingErrorMessage:c.value.sessionBindingErrorMessage,sessionBindingTtlDays:c.value.sessionBindingTtlDays,userMessageQueueEnabled:c.value.userMessageQueueEnabled,userMessageQueueDelayMs:c.value.userMessageQueueDelayMs,userMessageQueueTimeoutMs:c.value.userMessageQueueTimeoutMs,concurrentRequestQueueEnabled:c.value.concurrentRequestQueueEnabled,concurrentRequestQueueMaxSize:c.value.concurrentRequestQueueMaxSize,concurrentRequestQueueMaxSizeMultiplier:c.value.concurrentRequestQueueMaxSizeMultiplier,concurrentRequestQueueTimeoutMs:c.value.concurrentRequestQueueTimeoutMs},s=await lt(k,{signal:S.value.signal});s.success&&g.value&&(c.value={...c.value,updatedAt:((a=s.config)==null?void 0:a.updatedAt)||new Date().toISOString(),updatedBy:((t=s.config)==null?void 0:t.updatedBy)||null},m("Claude 转发配置已保存","success"))}catch(k){if(k.name==="AbortError"||!g.value)return;m("保存 Claude 转发配置失败","error"),console.error(k)}},de=async()=>{var a,t,k,s;if(g.value){le.value=!0;try{const u=await st({signal:S.value.signal});u.success&&g.value&&(I.value={baseService:((a=u.data)==null?void 0:a.baseService)||"claude",rates:((t=u.data)==null?void 0:t.rates)||I.value.rates,updatedAt:(k=u.data)==null?void 0:k.updatedAt,updatedBy:(s=u.data)==null?void 0:s.updatedBy})}catch(u){if(u.name==="AbortError"||!g.value)return;console.error("加载服务倍率配置失败:",u)}finally{g.value&&(le.value=!1)}}},$e=async()=>{var a,t;if(g.value){Z.value=!0;try{const k=await dt({rates:I.value.rates,baseService:I.value.baseService},{signal:S.value.signal});k.success&&g.value&&(I.value.updatedAt=((a=k.data)==null?void 0:a.updatedAt)||new Date().toISOString(),I.value.updatedBy=(t=k.data)==null?void 0:t.updatedBy,m("服务倍率配置已保存","success"))}catch(k){if(k.name==="AbortError"||!g.value)return;m("保存服务倍率配置失败","error"),console.error(k)}finally{g.value&&(Z.value=!1)}}},Be=a=>({claude:"fas fa-robot",codex:"fas fa-code",gemini:"fas fa-gem",droid:"fas fa-android",bedrock:"fab fa-aws",azure:"fab fa-microsoft",ccr:"fas fa-server"})[a]||"fas fa-cog",Re=a=>({claude:"bg-gradient-to-br from-orange-500 to-amber-600",codex:"bg-gradient-to-br from-green-500 to-emerald-600",gemini:"bg-gradient-to-br from-blue-500 to-indigo-600",droid:"bg-gradient-to-br from-green-600 to-lime-600",bedrock:"bg-gradient-to-br from-yellow-500 to-orange-600",azure:"bg-gradient-to-br from-blue-600 to-cyan-600",ccr:"bg-gradient-to-br from-purple-500 to-pink-600"})[a]||"bg-gradient-to-br from-gray-500 to-gray-600",Ee=a=>({claude:"Claude",codex:"Codex (OpenAI)",gemini:"Gemini",droid:"Droid",bedrock:"AWS Bedrock",azure:"Azure OpenAI",ccr:"CCR"})[a]||a,Ve=()=>{if(["bark","smtp","telegram"].includes(r.value.type)){Q.value=!1,N.value=!1;return}const a=r.value.url;if(!a){Q.value=!1,N.value=!1;return}try{new URL(a),a.startsWith("http://")||a.startsWith("https://")?(Q.value=!1,N.value=!0):(Q.value=!0,N.value=!1)}catch{Q.value=!0,N.value=!1}},ie=()=>{if(r.value.type==="bark"){if(!r.value.deviceKey)return m("请输入Bark设备密钥","error"),!1}else if(r.value.type==="telegram"){if(!r.value.botToken)return m("请输入 Telegram 机器人 Token","error"),!1;if(!r.value.chatId)return m("请输入 Telegram Chat ID","error"),!1;if(r.value.apiBaseUrl)try{const a=new URL(r.value.apiBaseUrl);if(!["http:","https:"].includes(a.protocol))return m("Telegram API 基础地址仅支持 http 或 https","error"),!1}catch{return m("请输入有效的 Telegram API 基础地址","error"),!1}if(r.value.proxyUrl)try{const a=new URL(r.value.proxyUrl);if(!["http:","https:","socks4:","socks4a:","socks5:"].includes(a.protocol))return m("Telegram 代理仅支持 http/https/socks 协议","error"),!1}catch{return m("请输入有效的 Telegram 代理地址","error"),!1}}else if(r.value.type==="smtp"){const a=[{field:"host",message:"SMTP服务器"},{field:"user",message:"用户名"},{field:"pass",message:"密码"},{field:"to",message:"收件人邮箱"}];for(const{field:t,message:k}of a)if(!r.value[t])return m(`请输入${k}`,"error"),!1}else{if(!r.value.url)return m("请输入Webhook URL","error"),!1;if(Q.value)return m("请输入有效的Webhook URL","error"),!1}return!0},De=async()=>{if(g.value&&ie()){L.value=!0;try{let a;E.value?a=await it(E.value.id,r.value,{signal:S.value.signal}):a=await ut(r.value,{signal:S.value.signal}),a.success&&g.value&&(m(E.value?"平台已更新":"平台已添加","success"),await G(),ee())}catch(a){if(a.name==="AbortError"||!g.value)return;m(a.message||"操作失败","error"),console.error(a)}finally{g.value&&(L.value=!1)}}},Qe=a=>{E.value=a,r.value={type:a.type||"wechat_work",name:a.name||"",url:a.url||"",enableSign:a.enableSign||!1,secret:a.secret||"",botToken:a.botToken||"",chatId:a.chatId||"",apiBaseUrl:a.apiBaseUrl||"",proxyUrl:a.proxyUrl||"",deviceKey:a.deviceKey||"",serverUrl:a.serverUrl||"",level:a.level||"",sound:a.sound||"",group:a.group||"",host:a.host||"",port:a.port??null,secure:a.secure||!1,user:a.user||"",pass:a.pass||"",from:a.from||"",to:Array.isArray(a.to)?a.to.join(", "):a.to||"",timeout:a.timeout??null,ignoreTLS:a.ignoreTLS||!1},O.value=!0},je=async a=>{if(g.value&&await F("删除平台","确定要删除这个平台吗？","删除","取消","danger"))try{(await ct(a,{signal:S.value.signal})).success&&g.value&&(m("平台已删除","success"),await G())}catch(t){if(t.name==="AbortError"||!g.value)return;m("删除失败","error"),console.error(t)}},qe=async a=>{if(g.value)try{const t=await gt(a,{signal:S.value.signal});t.success&&g.value&&(m(t.message,"success"),await G())}catch(t){if(t.name==="AbortError"||!g.value)return;m("操作失败","error"),console.error(t)}},Ne=async a=>{if(g.value)try{const t={type:a.type,secret:a.secret,enableSign:a.enableSign};a.type==="bark"?(t.deviceKey=a.deviceKey,t.serverUrl=a.serverUrl,t.level=a.level,t.sound=a.sound,t.group=a.group):a.type==="smtp"?(t.host=a.host,t.port=a.port,t.secure=a.secure,t.user=a.user,t.pass=a.pass,t.from=a.from,t.to=a.to,t.ignoreTLS=a.ignoreTLS):a.type==="telegram"?(t.botToken=a.botToken,t.chatId=a.chatId,t.apiBaseUrl=a.apiBaseUrl,t.proxyUrl=a.proxyUrl):t.url=a.url,(await Me(t,{signal:S.value.signal})).success&&g.value&&m("测试成功","success")}catch(t){if(t.name==="AbortError"||!g.value)return;m(t.error||t.message||"测试失败","error"),console.error(t)}},Pe=async()=>{if(g.value&&ie()){W.value=!0;try{(await Me(r.value,{signal:S.value.signal})).success&&g.value&&m("测试成功","success")}catch(a){if(a.name==="AbortError"||!g.value)return;m(a.error||a.message||"测试失败","error"),console.error(a)}finally{g.value&&(W.value=!1)}}},We=async()=>{var a,t,k,s;if(g.value)try{(await nt({signal:S.value.signal})).success&&g.value&&m("测试通知已发送","success")}catch(u){if(u.name==="AbortError"||!g.value)return;const j=((t=(a=u==null?void 0:u.response)==null?void 0:a.data)==null?void 0:t.message)||((s=(k=u==null?void 0:u.response)==null?void 0:k.data)==null?void 0:s.error)||(u==null?void 0:u.message)||"发送失败";m(j,"error"),console.error(u)}},ee=()=>{g.value&&(O.value=!1,setTimeout(()=>{g.value&&(E.value=null,r.value={type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1},Q.value=!1,N.value=!1,W.value=!1,L.value=!1)},0))},ue=a=>({wechat_work:"企业微信",dingtalk:"钉钉",feishu:"飞书",slack:"Slack",discord:"Discord",telegram:"Telegram",bark:"Bark",smtp:"邮件通知",custom:"自定义"})[a]||a,Le=a=>({wechat_work:"fab fa-weixin text-green-600",dingtalk:"fas fa-comment-dots text-blue-500",feishu:"fas fa-dove text-blue-600",slack:"fab fa-slack text-purple-600",discord:"fab fa-discord text-indigo-600",telegram:"fab fa-telegram-plane text-sky-500",bark:"fas fa-bell text-orange-500",smtp:"fas fa-envelope text-blue-600",custom:"fas fa-webhook text-gray-600"})[a]||"fas fa-bell",ge=a=>({wechat_work:"请在企业微信群机器人设置中获取Webhook地址",dingtalk:"请在钉钉群机器人设置中获取Webhook地址",feishu:"请在飞书群机器人设置中获取Webhook地址",slack:"请在Slack应用的Incoming Webhooks中获取地址",discord:"请在Discord服务器的集成设置中创建Webhook",telegram:"使用 @BotFather 创建机器人并复制 Token，Chat ID 可通过 @userinfobot 或相关工具获取",bark:"请在Bark App中查看您的设备密钥",smtp:"请配置SMTP服务器信息，支持Gmail、QQ邮箱等",custom:"请输入完整的Webhook接收地址"})[a]||"",Oe=a=>a?a.length<=12?a:`${a.slice(0,6)}...${a.slice(-4)}`:"",ze=a=>({accountAnomaly:"账号异常",quotaWarning:"配额警告",systemError:"系统错误",securityAlert:"安全警报",rateLimitRecovery:"限流恢复",test:"测试通知"})[a]||a,Ke=a=>({accountAnomaly:"账号状态异常、认证失败等",quotaWarning:"API调用配额不足警告",systemError:"系统运行错误和故障",securityAlert:"安全相关的警报通知",rateLimitRecovery:"限流状态恢复时发送提醒",test:"用于测试Webhook连接是否正常"})[a]||"",ce=async()=>{try{const a={siteName:f.value.siteName,siteIcon:f.value.siteIcon,siteIconData:f.value.siteIconData,showAdminButton:f.value.showAdminButton,apiStatsNotice:f.value.apiStatsNotice},t=await R.saveOemSettings(a);t&&t.success?m("OEM设置保存成功","success"):m((t==null?void 0:t.message)||"保存失败","error")}catch{m("保存OEM设置失败","error")}},fe=async()=>{if(await F("重置设置",`确定要重置为默认设置吗？

这将清除所有自定义的网站名称和图标设置。`,"重置","取消","warning"))try{const a=await R.resetOemSettings();a&&a.success?m("已重置为默认设置","success"):m("重置失败","error")}catch{m("重置失败","error")}},be=async a=>{const t=a.target.files[0];if(!t)return;const k=R.validateIconFile(t);if(!k.isValid){k.errors.forEach(s=>m(s,"error"));return}try{const s=await R.fileToBase64(t);f.value.siteIconData=s}catch{m("文件读取失败","error")}a.target.value=""},pe=()=>{f.value.siteIcon="",f.value.siteIconData=""},me=()=>{console.warn("Icon failed to load")},te=R.formatDateTime;return(a,t)=>{const k=Et;return n(),d(z,null,[e("div",Dt,[e("div",Qt,[e("div",jt,[e("h3",qt,l(a.$t("settings.pageTitle")),1),e("p",Nt,l(a.$t("settings.pageDescription")),1)]),e("div",Pt,[e("nav",Wt,[e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",w.value==="branding"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[0]||(t[0]=s=>w.value="branding")},[t[55]||(t[55]=e("i",{class:"fas fa-palette mr-2"},null,-1)),o(" "+l(a.$t("settings.navigation.branding")),1)],2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",w.value==="webhook"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[1]||(t[1]=s=>w.value="webhook")},[t[56]||(t[56]=e("i",{class:"fas fa-bell mr-2"},null,-1)),o(" "+l(a.$t("settings.navigation.webhook")),1)],2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",w.value==="claude"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[2]||(t[2]=s=>w.value="claude")},[t[57]||(t[57]=e("i",{class:"fas fa-robot mr-2"},null,-1)),o(" Claude "+l(a.$t("settings.branding.actions.save")),1)],2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",w.value==="routing"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[3]||(t[3]=s=>w.value="routing")},t[58]||(t[58]=[e("i",{class:"fas fa-route mr-2"},null,-1),o(" Smart Routing ",-1)]),2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",w.value==="serviceRates"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[4]||(t[4]=s=>w.value="serviceRates")},t[59]||(t[59]=[e("i",{class:"fas fa-balance-scale mr-2"},null,-1),o(" 服务倍率 ",-1)]),2)])]),p(D)?(n(),d("div",Lt,[t[60]||(t[60]=e("div",{class:"loading-spinner mx-auto mb-4"},null,-1)),e("p",Ot,l(a.$t("settings.loading.settings")),1)])):(n(),d("div",zt,[i(e("div",null,[e("div",Kt,[e("table",Ft,[e("tbody",_t,[e("tr",Gt,[e("td",Ht,[e("div",Jt,[t[61]||(t[61]=e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600"},[e("i",{class:"fas fa-font text-xs text-white"})],-1)),e("div",null,[e("div",Xt,l(a.$t("settings.branding.siteName.label")),1),e("div",Yt,l(a.$t("settings.branding.siteName.description")),1)])])]),e("td",Zt,[i(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>p(f).siteName=s),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:a.$t("settings.branding.siteName.placeholder"),type:"text"},null,8,ea),[[x,p(f).siteName]]),e("p",ta,l(a.$t("settings.branding.siteName.helpText")),1)])]),e("tr",aa,[e("td",ra,[e("div",sa,[t[62]||(t[62]=e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-purple-600"},[e("i",{class:"fas fa-image text-xs text-white"})],-1)),e("div",null,[e("div",la,l(a.$t("settings.branding.siteIcon.label")),1),e("div",oa,l(a.$t("settings.branding.siteIcon.description")),1)])])]),e("td",na,[e("div",da,[p(f).siteIconData||p(f).siteIcon?(n(),d("div",ia,[e("img",{alt:"图标预览",class:"h-8 w-8",src:p(f).siteIconData||p(f).siteIcon,onError:me},null,40,ua),e("span",ga,l(a.$t("settings.branding.siteIcon.currentIcon")),1),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:pe},[t[63]||(t[63]=e("i",{class:"fas fa-trash mr-1"},null,-1)),o(l(a.$t("common.action.delete")),1)])])):y("",!0),e("div",null,[e("input",{ref_key:"iconFileInput",ref:K,accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:be},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[6]||(t[6]=s=>a.$refs.iconFileInput.click())},[t[64]||(t[64]=e("i",{class:"fas fa-upload mr-2"},null,-1)),o(" "+l(a.$t("settings.branding.siteIcon.uploadButton")),1)]),e("span",ca,l(a.$t("settings.branding.siteIcon.supportedFormats")),1)])])])]),e("tr",fa,[e("td",ba,[e("div",pa,[t[65]||(t[65]=e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"},[e("i",{class:"fas fa-eye-slash text-xs text-white"})],-1)),e("div",null,[e("div",ma,l(a.$t("settings.branding.adminButton.label")),1),e("div",ya,l(a.$t("settings.branding.adminButton.description")),1)])])]),e("td",xa,[e("div",va,[e("label",ka,[i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>P.value=s),class:"peer sr-only",type:"checkbox"},null,512),[[q,P.value]]),t[66]||(t[66]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",ha,l(P.value?a.$t("settings.branding.adminButton.hideButton"):a.$t("settings.branding.adminButton.showButton")),1)])]),t[67]||(t[67]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 启用后，当模型负载过高返回 529 错误时，系统会自动将该账户排除调度一段时间 ",-1))])]),e("tr",wa,[t[69]||(t[69]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-red-500 to-rose-600"},[e("i",{class:"fas fa-route text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 全局强制模型路由 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"}," 重写所有请求的目标模型 ")])])],-1)),e("td",Sa,[i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>c.value.globalForcedModel=s),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",placeholder:"例如: ccr/glm-4.7 (留空禁用)",type:"text",onChange:V},null,544),[[x,c.value.globalForcedModel]]),t[68]||(t[68]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 所有未单独设置强制路由的 API Key 请求都将强制路由到此模型。 ",-1))])]),e("tr",Ca,[t[73]||(t[73]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-amber-500 to-orange-600"},[e("i",{class:"fas fa-bell text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 统计页通知 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"API Stats")])])],-1)),e("td",Ta,[e("div",Ua,[e("label",Ma,[i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>p(f).apiStatsNotice.enabled=s),class:"peer sr-only",type:"checkbox"},null,512),[[q,p(f).apiStatsNotice.enabled]]),t[70]||(t[70]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",Aa,l(p(f).apiStatsNotice.enabled?"已启用":"已禁用"),1)])]),p(f).apiStatsNotice.enabled?(n(),d("div",Ia,[e("div",null,[t[71]||(t[71]=e("label",{class:"mb-1 block text-xs text-gray-500 dark:text-gray-400"}," 标题 ",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>p(f).apiStatsNotice.title=s),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"通知标题",type:"text"},null,512),[[x,p(f).apiStatsNotice.title]])]),e("div",null,[t[72]||(t[72]=e("label",{class:"mb-1 block text-xs text-gray-500 dark:text-gray-400"}," 内容 ",-1)),i(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>p(f).apiStatsNotice.content=s),class:"form-input w-full max-w-md resize-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"2000",placeholder:"通知内容（支持换行）",rows:"3"},null,512),[[x,p(f).apiStatsNotice.content]])])])):y("",!0)])]),e("tr",null,[e("td",$a,[e("div",Ba,[e("div",Ra,[e("button",{class:A(["btn btn-primary px-6 py-3",{"cursor-not-allowed opacity-50":p(U)}]),disabled:p(U),onClick:ce},[p(U)?(n(),d("div",Va)):(n(),d("i",Da)),o(" "+l(p(U)?a.$t("settings.loading.saving"):a.$t("settings.branding.actions.save")),1)],10,Ea),e("button",{class:"btn bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:p(U),onClick:fe},[t[74]||(t[74]=e("i",{class:"fas fa-undo mr-2"},null,-1)),o(" "+l(a.$t("settings.branding.actions.reset")),1)],8,Qa)]),p(f).updatedAt?(n(),d("div",ja,[t[75]||(t[75]=e("i",{class:"fas fa-clock mr-1"},null,-1)),o(" "+l(a.$t("settings.branding.actions.lastUpdated",{time:p(te)(p(f).updatedAt)})),1)])):y("",!0)])])])])])]),e("div",qa,[e("div",Na,[t[76]||(t[76]=B('<div class="mb-3 flex items-center gap-3" data-v-28815dfd><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 text-white shadow-md" data-v-28815dfd><i class="fas fa-tag" data-v-28815dfd></i></div><div data-v-28815dfd><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-28815dfd>站点名称</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-28815dfd>自定义您的站点品牌名称</p></div></div>',1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>p(f).siteName=s),class:"form-input w-full dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"Claude Relay Service",type:"text"},null,512),[[x,p(f).siteName]])]),e("div",Pa,[t[80]||(t[80]=B('<div class="mb-3 flex items-center gap-3" data-v-28815dfd><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-md" data-v-28815dfd><i class="fas fa-image" data-v-28815dfd></i></div><div data-v-28815dfd><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-28815dfd>站点图标</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-28815dfd> 上传自定义图标或输入图标URL </p></div></div>',1)),e("div",Wa,[p(f).siteIconData||p(f).siteIcon?(n(),d("div",La,[e("img",{alt:"图标预览",class:"h-8 w-8",src:p(f).siteIconData||p(f).siteIcon,onError:me},null,40,Oa),t[77]||(t[77]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前图标",-1)),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:pe}," 删除 ")])):y("",!0),e("div",null,[e("input",{ref:"iconFileInputMobile",accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:be},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[13]||(t[13]=s=>a.$refs.iconFileInputMobile.click())},t[78]||(t[78]=[e("i",{class:"fas fa-upload mr-2"},null,-1),o(" 上传图标 ",-1)])),t[79]||(t[79]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," 支持 .ico, .png, .jpg, .svg 格式，最大 350KB ",-1))])])]),e("div",za,[t[83]||(t[83]=B('<div class="mb-3 flex items-center gap-3" data-v-28815dfd><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-md" data-v-28815dfd><i class="fas fa-eye-slash" data-v-28815dfd></i></div><div data-v-28815dfd><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-28815dfd>管理入口</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-28815dfd>控制登录按钮在首页的显示</p></div></div>',1)),e("div",Ka,[e("label",Fa,[i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>P.value=s),class:"peer sr-only",type:"checkbox"},null,512),[[q,P.value]]),t[81]||(t[81]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",_a,l(P.value?"隐藏登录按钮":"显示登录按钮"),1)]),t[82]||(t[82]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," 隐藏后，用户需要直接访问 /admin/login 页面登录 ",-1))])]),e("div",Ga,[e("div",Ha,[e("button",{class:A(["btn btn-primary w-full px-6 py-3",{"cursor-not-allowed opacity-50":p(U)}]),disabled:p(U),onClick:ce},[p(U)?(n(),d("div",Xa)):(n(),d("i",Ya)),o(" "+l(p(U)?"保存中...":"保存设置"),1)],10,Ja),e("button",{class:"btn w-full bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:p(U),onClick:fe},t[84]||(t[84]=[e("i",{class:"fas fa-undo mr-2"},null,-1),o(" 重置为默认 ",-1)]),8,Za),p(f).updatedAt?(n(),d("div",er,[t[85]||(t[85]=e("i",{class:"fas fa-clock mr-1"},null,-1)),o(" 上次更新: "+l(p(te)(p(f).updatedAt)),1)])):y("",!0)])])])],512),[[J,w.value==="branding"]]),i(e("div",null,[e("div",tr,[e("div",ar,[e("div",null,[e("h2",rr,l(a.$t("settings.webhook.mainSwitch.title")),1),e("p",sr,l(a.$t("settings.webhook.mainSwitch.description")),1)]),e("label",lr,[i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>T.value.enabled=s),class:"peer sr-only",type:"checkbox",onChange:H},null,544),[[q,T.value.enabled]]),t[86]||(t[86]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1))])])]),e("div",or,[e("h2",nr,l(a.$t("settings.webhook.notificationTypes.title")),1),e("div",dr,[(n(!0),d(z,null,Y(T.value.notificationTypes,(s,u)=>(n(),d("div",{key:u,class:"flex items-center justify-between"},[e("div",null,[e("span",ir,l(ze(u)),1),e("span",ur,l(Ke(u)),1)]),e("label",gr,[i(e("input",{"onUpdate:modelValue":j=>T.value.notificationTypes[u]=j,class:"peer sr-only",type:"checkbox",onChange:H},null,40,cr),[[q,T.value.notificationTypes[u]]]),t[87]||(t[87]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))])]))),128))])]),e("div",fr,[e("div",br,[e("h2",pr,l(a.$t("settings.webhook.platforms.title")),1),e("button",{class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",onClick:t[16]||(t[16]=s=>O.value=!0)},[t[88]||(t[88]=e("i",{class:"fas fa-plus mr-2"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.addButton")),1)])]),T.value.platforms&&T.value.platforms.length>0?(n(),d("div",mr,[(n(!0),d(z,null,Y(T.value.platforms,s=>(n(),d("div",{key:s.id,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[e("div",yr,[e("div",xr,[e("div",vr,[e("i",{class:A(["mr-3 text-xl",Le(s.type)])},null,2),e("div",null,[e("h3",kr,l(s.name||ue(s.type)),1),e("p",hr,l(ue(s.type)),1)])]),e("div",wr,[s.type!=="smtp"&&s.type!=="telegram"?(n(),d("div",Sr,[t[89]||(t[89]=e("i",{class:"fas fa-link mr-2"},null,-1)),e("span",Cr,l(s.url),1)])):y("",!0),s.type==="telegram"?(n(),d("div",Tr,[t[90]||(t[90]=e("i",{class:"fas fa-comments mr-2"},null,-1)),e("span",Ur,"Chat ID: "+l(s.chatId||a.$t("settings.webhook.platforms.fields.notConfigured")),1)])):y("",!0),s.type==="telegram"&&s.botToken?(n(),d("div",Mr,[t[91]||(t[91]=e("i",{class:"fas fa-key mr-2"},null,-1)),e("span",Ar,"Token: "+l(Oe(s.botToken)),1)])):y("",!0),s.type==="telegram"&&s.apiBaseUrl?(n(),d("div",Ir,[t[92]||(t[92]=e("i",{class:"fas fa-globe mr-2"},null,-1)),e("span",$r,"API: "+l(s.apiBaseUrl),1)])):y("",!0),s.type==="telegram"&&s.proxyUrl?(n(),d("div",Br,[t[93]||(t[93]=e("i",{class:"fas fa-route mr-2"},null,-1)),e("span",Rr,"Proxy: "+l(s.proxyUrl),1)])):y("",!0),s.type==="smtp"&&s.to?(n(),d("div",Er,[t[94]||(t[94]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),e("span",Vr,l(Array.isArray(s.to)?s.to.join(", "):s.to),1)])):y("",!0),s.enableSign?(n(),d("div",Dr,[t[95]||(t[95]=e("i",{class:"fas fa-shield-alt mr-2"},null,-1)),e("span",null,l(a.$t("settings.webhook.platforms.fields.enableSign")),1)])):y("",!0)])]),e("div",Qr,[e("label",jr,[e("input",{checked:s.enabled,class:"peer sr-only",type:"checkbox",onChange:u=>qe(s.id)},null,40,qr),t[96]||(t[96]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))]),e("button",{class:"rounded-lg bg-blue-100 p-2 text-blue-600 transition-colors hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800",title:a.$t("settings.webhook.platforms.actions.test"),onClick:u=>Ne(s)},t[97]||(t[97]=[e("i",{class:"fas fa-vial"},null,-1)]),8,Nr),e("button",{class:"rounded-lg bg-gray-100 p-2 text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600",title:a.$t("common.action.edit"),onClick:u=>Qe(s)},t[98]||(t[98]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Pr),e("button",{class:"rounded-lg bg-red-100 p-2 text-red-600 transition-colors hover:bg-red-200 dark:bg-red-900 dark:text-red-400 dark:hover:bg-red-800",title:a.$t("common.action.delete"),onClick:u=>je(s.id)},t[99]||(t[99]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Wr)])])]))),128))])):(n(),d("div",Lr,l(a.$t("settings.webhook.platforms.emptyDescription")),1))]),e("div",Or,[t[103]||(t[103]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},"高级设置",-1)),e("div",zr,[e("div",null,[t[100]||(t[100]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 最大重试次数 ",-1)),i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>T.value.retrySettings.maxRetries=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10",min:"0",type:"number",onChange:H},null,544),[[x,T.value.retrySettings.maxRetries,void 0,{number:!0}]])]),e("div",null,[t[101]||(t[101]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 重试延迟 (毫秒) ",-1)),i(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>T.value.retrySettings.retryDelay=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10000",min:"100",step:"100",type:"number",onChange:H},null,544),[[x,T.value.retrySettings.retryDelay,void 0,{number:!0}]])]),e("div",null,[t[102]||(t[102]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 超时时间 (毫秒) ",-1)),i(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>T.value.retrySettings.timeout=s),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"30000",min:"1000",step:"1000",type:"number",onChange:H},null,544),[[x,T.value.retrySettings.timeout,void 0,{number:!0}]])])])]),e("div",{class:"mt-6 text-center"},[e("button",{class:"rounded-lg bg-green-600 px-6 py-3 text-white shadow-lg transition-all hover:bg-green-700 hover:shadow-xl",onClick:We},t[104]||(t[104]=[e("i",{class:"fas fa-paper-plane mr-2"},null,-1),o(" 发送测试通知 ",-1)]))])],512),[[J,w.value==="webhook"]]),i(e("div",null,null,512),[[J,w.value==="claude"]]),i(e("div",null,[e("div",Kr,[e("div",Fr,[t[105]||(t[105]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},[e("i",{class:"fas fa-magic mr-2 text-purple-500"}),o(" Smart Routing Wizard ")]),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," Configure intelligent model redirection rules visually. ")],-1)),e("button",{onClick:t[20]||(t[20]=s=>a.showRoutingWizard=!0),class:"btn btn-primary px-4 py-2"}," Launch Wizard ")]),e("div",_r,[t[108]||(t[108]=e("h3",{class:"text-md font-medium text-gray-700 dark:text-gray-300"}," Active Global Mappings ",-1)),Object.keys(c.value.globalModelMapping||{}).length>0?(n(),d("div",Gr,[(n(!0),d(z,null,Y(c.value.globalModelMapping,(s,u)=>(n(),d("div",{key:u,class:"flex items-center justify-between rounded-lg border border-gray-200 bg-gray-50 p-3 dark:border-gray-600 dark:bg-gray-700"},[e("div",Hr,[e("span",Jr,l(u),1),t[106]||(t[106]=e("i",{class:"fas fa-arrow-right text-xs text-gray-400"},null,-1)),e("span",Xr,l(s),1)]),e("button",{onClick:j=>a.removeGlobalMapping(u),class:"text-red-500 transition-colors hover:text-red-700"},t[107]||(t[107]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Yr)]))),128))])):(n(),d("div",Zr,"No global mappings configured."))])])],512),[[J,w.value==="routing"]]),a.showRoutingWizard?(n(),Je(k,{key:0,onClose:t[21]||(t[21]=s=>a.showRoutingWizard=!1),onSuccess:a.handleWizardSuccess},null,8,["onSuccess"])):y("",!0),se.value?(n(),d("div",es,t[109]||(t[109]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载配置...",-1)]))):(n(),d("div",ts,[e("div",as,[e("div",rs,[t[111]||(t[111]=B('<div data-v-28815dfd><div class="flex items-center" data-v-28815dfd><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-orange-500 to-amber-600 text-white shadow-lg" data-v-28815dfd><i class="fas fa-terminal" data-v-28815dfd></i></div><div data-v-28815dfd><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-28815dfd> 仅允许 Claude Code 客户端 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-28815dfd> 启用后，所有 <code class="rounded bg-gray-100 px-1 dark:bg-gray-700" data-v-28815dfd>/api/v1/messages</code> 和 <code class="rounded bg-gray-100 px-1 dark:bg-gray-700" data-v-28815dfd>/claude/v1/messages</code> 端点将强制验证 Claude Code CLI 客户端 </p></div></div></div>',1)),e("label",ss,[i(e("input",{"onUpdate:modelValue":t[22]||(t[22]=s=>c.value.claudeCodeOnlyEnabled=s),class:"peer sr-only",type:"checkbox",onChange:V},null,544),[[q,c.value.claudeCodeOnlyEnabled]]),t[110]||(t[110]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-orange-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-orange-800"},null,-1))])]),t[112]||(t[112]=B('<div class="mt-4 rounded-lg bg-amber-50 p-4 dark:bg-amber-900/20" data-v-28815dfd><div class="flex" data-v-28815dfd><i class="fas fa-info-circle mt-0.5 text-amber-500" data-v-28815dfd></i><div class="ml-3" data-v-28815dfd><p class="text-sm text-amber-700 dark:text-amber-300" data-v-28815dfd> 此设置与 API Key 级别的客户端限制是 <strong data-v-28815dfd>OR 逻辑</strong>：全局启用或 API Key 设置中启用，都会执行 Claude Code 验证。 </p></div></div></div>',1))]),e("div",ls,[e("div",os,[t[114]||(t[114]=B('<div data-v-28815dfd><div class="flex items-center" data-v-28815dfd><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg" data-v-28815dfd><i class="fas fa-link" data-v-28815dfd></i></div><div data-v-28815dfd><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-28815dfd> 强制会话绑定 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-28815dfd> 启用后，系统会将原始会话 ID 绑定到首次使用的账户，确保上下文的一致性 </p></div></div></div>',1)),e("label",ns,[i(e("input",{"onUpdate:modelValue":t[23]||(t[23]=s=>c.value.globalSessionBindingEnabled=s),class:"peer sr-only",type:"checkbox",onChange:V},null,544),[[q,c.value.globalSessionBindingEnabled]]),t[113]||(t[113]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-purple-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-purple-800"},null,-1))])]),c.value.globalSessionBindingEnabled?(n(),d("div",ds,[e("div",null,[t[115]||(t[115]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-clock mr-2 text-gray-400"}),o(" 绑定有效期（天） ")],-1)),i(e("input",{"onUpdate:modelValue":t[24]||(t[24]=s=>c.value.sessionBindingTtlDays=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"365",min:"1",placeholder:"30",type:"number",onChange:V},null,544),[[x,c.value.sessionBindingTtlDays,void 0,{number:!0}]]),t[116]||(t[116]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 会话绑定到账户后的有效时间，过期后会自动解除绑定 ",-1))]),e("div",null,[t[117]||(t[117]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-exclamation-triangle mr-2 text-gray-400"}),o(" 旧会话污染提示 ")],-1)),i(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=s=>c.value.sessionBindingErrorMessage=s),class:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"你的本地session已污染，请清理后使用。",rows:"2",onChange:V},null,544),[[x,c.value.sessionBindingErrorMessage]]),t[118]||(t[118]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 当检测到为旧的sessionId且未在系统中有调度记录时提示，返回给客户端的错误消息 ",-1))])])):y("",!0),t[119]||(t[119]=B('<div class="mt-4 rounded-lg bg-purple-50 p-4 dark:bg-purple-900/20" data-v-28815dfd><div class="flex" data-v-28815dfd><i class="fas fa-lightbulb mt-0.5 text-purple-500" data-v-28815dfd></i><div class="ml-3" data-v-28815dfd><p class="text-sm text-purple-700 dark:text-purple-300" data-v-28815dfd><strong data-v-28815dfd>工作原理：</strong>系统会提取请求中的原始 session ID （来自 <code class="rounded bg-purple-100 px-1 dark:bg-purple-800" data-v-28815dfd>metadata.user_id</code>）， 并将其与首次调度的账户绑定。后续使用相同 session ID 的请求将自动路由到同一账户。 </p><p class="mt-2 text-sm text-purple-700 dark:text-purple-300" data-v-28815dfd><strong data-v-28815dfd>新会话识别：</strong>如果绑定会话历史中没有该sessionId但请求中 <code class="rounded bg-purple-100 px-1 dark:bg-purple-800" data-v-28815dfd>messages.length &gt; 1</code>， 系统会认为这是一个污染的会话并拒绝请求。 </p></div></div></div>',1))]),e("div",is,[e("div",us,[t[121]||(t[121]=B('<div data-v-28815dfd><div class="flex items-center" data-v-28815dfd><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-cyan-500 to-teal-600 text-white shadow-lg" data-v-28815dfd><i class="fas fa-list-ol" data-v-28815dfd></i></div><div data-v-28815dfd><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-28815dfd> 用户消息串行队列 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-28815dfd> 启用后，同一账户的用户消息请求将串行执行，并在请求之间添加延迟，防止触发上游限流 </p></div></div></div>',1)),e("label",gs,[i(e("input",{"onUpdate:modelValue":t[26]||(t[26]=s=>c.value.userMessageQueueEnabled=s),class:"peer sr-only",type:"checkbox",onChange:V},null,544),[[q,c.value.userMessageQueueEnabled]]),t[120]||(t[120]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-teal-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-teal-800"},null,-1))])]),c.value.userMessageQueueEnabled?(n(),d("div",cs,[e("div",null,[t[122]||(t[122]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-hourglass-half mr-2 text-gray-400"}),o(" 请求间隔（毫秒） ")],-1)),i(e("input",{"onUpdate:modelValue":t[27]||(t[27]=s=>c.value.userMessageQueueDelayMs=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10000",min:"0",placeholder:"200",type:"number",onChange:V},null,544),[[x,c.value.userMessageQueueDelayMs,void 0,{number:!0}]]),t[123]||(t[123]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 同一账户的用户消息请求之间的最小间隔时间（0-10000毫秒） ",-1))]),e("div",null,[t[124]||(t[124]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-stopwatch mr-2 text-gray-400"}),o(" 队列超时（毫秒） ")],-1)),i(e("input",{"onUpdate:modelValue":t[28]||(t[28]=s=>c.value.userMessageQueueTimeoutMs=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"300000",min:"1000",placeholder:"30000",type:"number",onChange:V},null,544),[[x,c.value.userMessageQueueTimeoutMs,void 0,{number:!0}]]),t[125]||(t[125]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 请求在队列中等待的最大时间，超时将返回 503 错误（1000-300000毫秒） ",-1))])])):y("",!0),t[126]||(t[126]=B('<div class="mt-4 rounded-lg bg-teal-50 p-4 dark:bg-teal-900/20" data-v-28815dfd><div class="flex" data-v-28815dfd><i class="fas fa-info-circle mt-0.5 text-teal-500" data-v-28815dfd></i><div class="ml-3" data-v-28815dfd><p class="text-sm text-teal-700 dark:text-teal-300" data-v-28815dfd><strong data-v-28815dfd>工作原理：</strong>系统检测请求中最后一条消息的 <code class="rounded bg-teal-100 px-1 dark:bg-teal-800" data-v-28815dfd>role</code> 是否为 <code class="rounded bg-teal-100 px-1 dark:bg-teal-800" data-v-28815dfd>user</code>。用户消息请求需要排队串行执行，而工具调用结果、助手消息续传等不受此限制。 </p></div></div></div>',1))]),e("div",fs,[e("div",bs,[t[128]||(t[128]=B('<div class="flex items-center" data-v-28815dfd><div class="flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg" data-v-28815dfd><i class="fas fa-layer-group text-xl" data-v-28815dfd></i></div><div class="ml-4" data-v-28815dfd><h4 class="text-lg font-semibold text-gray-900 dark:text-white" data-v-28815dfd>并发请求排队</h4><p class="text-sm text-gray-500 dark:text-gray-400" data-v-28815dfd> 当 API Key 并发请求超限时进入队列等待，而非直接拒绝 </p></div></div>',1)),e("label",ps,[i(e("input",{"onUpdate:modelValue":t[29]||(t[29]=s=>c.value.concurrentRequestQueueEnabled=s),class:"peer sr-only",type:"checkbox",onChange:V},null,544),[[q,c.value.concurrentRequestQueueEnabled]]),t[127]||(t[127]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1))])]),c.value.concurrentRequestQueueEnabled?(n(),d("div",ms,[e("div",null,[t[129]||(t[129]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-list-ol mr-2 text-gray-400"}),o(" 固定最小排队数 ")],-1)),i(e("input",{"onUpdate:modelValue":t[30]||(t[30]=s=>c.value.concurrentRequestQueueMaxSize=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"100",min:"1",placeholder:"3",type:"number",onChange:V},null,544),[[x,c.value.concurrentRequestQueueMaxSize,void 0,{number:!0}]]),t[130]||(t[130]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 最大排队数的固定最小值（1-100） ",-1))]),e("div",null,[t[131]||(t[131]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-times mr-2 text-gray-400"}),o(" 排队数倍数 ")],-1)),i(e("input",{"onUpdate:modelValue":t[31]||(t[31]=s=>c.value.concurrentRequestQueueMaxSizeMultiplier=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10",min:"0",placeholder:"1",step:"0.5",type:"number",onChange:V},null,544),[[x,c.value.concurrentRequestQueueMaxSizeMultiplier,void 0,{number:!0}]]),t[132]||(t[132]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 最大排队数 = MAX(倍数 × 并发限制, 固定值)，设为 0 则仅使用固定值 ",-1))]),e("div",null,[t[133]||(t[133]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-stopwatch mr-2 text-gray-400"}),o(" 排队超时时间（毫秒） ")],-1)),i(e("input",{"onUpdate:modelValue":t[32]||(t[32]=s=>c.value.concurrentRequestQueueTimeoutMs=s),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"300000",min:"5000",placeholder:"10000",type:"number",onChange:V},null,544),[[x,c.value.concurrentRequestQueueTimeoutMs,void 0,{number:!0}]]),t[134]||(t[134]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 请求在排队中等待的最大时间，超时将返回 429 错误（5秒-5分钟，默认10秒） ",-1))])])):y("",!0),t[135]||(t[135]=B('<div class="mt-4 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20" data-v-28815dfd><div class="flex" data-v-28815dfd><i class="fas fa-info-circle mt-0.5 text-blue-500" data-v-28815dfd></i><div class="ml-3" data-v-28815dfd><p class="text-sm text-blue-700 dark:text-blue-300" data-v-28815dfd><strong data-v-28815dfd>工作原理：</strong>当 API Key 的并发请求超过 <code class="rounded bg-blue-100 px-1 dark:bg-blue-800" data-v-28815dfd>concurrencyLimit</code> 时，超限请求会进入队列等待而非直接返回 429。适合 Claude Code Agent 并行工具调用场景。 </p></div></div></div>',1))]),c.value.updatedAt?(n(),d("div",ys,[t[138]||(t[138]=e("i",{class:"fas fa-history mr-2"},null,-1)),o(" 最后更新："+l(p(te)(c.value.updatedAt))+" ",1),c.value.updatedBy?(n(),d("span",xs,[t[136]||(t[136]=o(" 由 ",-1)),e("strong",null,l(c.value.updatedBy),1),t[137]||(t[137]=o(" 修改 ",-1))])):y("",!0)])):y("",!0)])),i(e("div",null,[le.value?(n(),d("div",vs,t[139]||(t[139]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载配置...",-1)]))):(n(),d("div",ks,[e("div",hs,[e("div",ws,[t[143]||(t[143]=e("div",{class:"mr-4 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-blue-500 text-white"},[e("i",{class:"fas fa-info"})],-1)),e("div",null,[t[142]||(t[142]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"}," 服务倍率说明 ",-1)),e("p",Ss,[t[140]||(t[140]=o(" 服务倍率用于计算不同服务的计费费用。以 ",-1)),e("strong",null,l(I.value.baseService||"claude"),1),t[141]||(t[141]=o(" 为基准（倍率 1.0），其他服务按倍率换算。例如：Gemini 倍率 0.5 表示消耗 $1 只扣除 $0.5 额度。 ",-1))])])])]),e("div",Cs,[e("div",Ts,[t[145]||(t[145]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},[e("i",{class:"fas fa-sliders-h mr-2 text-blue-500"}),o(" 倍率配置 ")],-1)),e("button",{class:"rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 disabled:opacity-50",disabled:Z.value,onClick:$e},[t[144]||(t[144]=e("i",{class:"fas fa-save mr-2"},null,-1)),o(" "+l(Z.value?"保存中...":"保存配置"),1)],8,Us)]),e("div",Ms,[(n(!0),d(z,null,Y(I.value.rates,(s,u)=>(n(),d("div",{key:u,class:"flex items-center justify-between rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[e("div",As,[e("div",{class:A(["mr-3 flex h-10 w-10 items-center justify-center rounded-lg",Re(u)])},[e("i",{class:A(["text-white",Be(u)])},null,2)],2),e("div",null,[e("div",Is,l(Ee(u)),1),e("div",$s,[o(l(u)+" ",1),u===I.value.baseService?(n(),d("span",Bs," 基准服务 ")):y("",!0)])])]),e("div",Rs,[i(e("input",{"onUpdate:modelValue":j=>I.value.rates[u]=j,class:"w-24 rounded-lg border border-gray-300 px-3 py-2 text-center text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",max:"10",min:"0.1",step:"0.1",type:"number"},null,8,Es),[[x,I.value.rates[u],void 0,{number:!0}]]),t[146]||(t[146]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"倍",-1))])]))),128))]),I.value.updatedAt?(n(),d("div",Vs,[t[149]||(t[149]=e("i",{class:"fas fa-history mr-2"},null,-1)),o(" 最后更新："+l(p(te)(I.value.updatedAt))+" ",1),I.value.updatedBy?(n(),d("span",Ds,[t[147]||(t[147]=o(" 由 ",-1)),e("strong",null,l(I.value.updatedBy),1),t[148]||(t[148]=o(" 修改 ",-1))])):y("",!0)])):y("",!0)])]))],512),[[J,w.value==="serviceRates"]])]))])]),O.value?(n(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out",onClick:ee},[e("div",{class:"relative mx-4 w-full max-w-2xl overflow-hidden rounded-2xl bg-white shadow-2xl transition-all duration-300 ease-out dark:bg-gray-800",onClick:t[54]||(t[54]=Ze(()=>{},["stop"]))},[e("div",Qs,[e("div",js,[e("div",qs,[t[150]||(t[150]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-lg"},[e("i",{class:"fas fa-bell"})],-1)),e("div",null,[e("h3",Ns,l(E.value?"编辑":"添加")+"通知平台 ",1),e("p",Ps," 配置"+l(E.value?"并更新":"新的")+"Webhook通知渠道 ",1)])]),e("button",{class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700 dark:hover:text-gray-300",onClick:ee},t[151]||(t[151]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])]),e("div",Ws,[e("div",Ls,[e("div",null,[t[155]||(t[155]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-layer-group mr-2 text-gray-400"}),o(" 平台类型 ")],-1)),e("div",Os,[i(e("select",{"onUpdate:modelValue":t[33]||(t[33]=s=>r.value.type=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",disabled:E.value},t[152]||(t[152]=[B('<option value="wechat_work" data-v-28815dfd>🟢 企业微信</option><option value="dingtalk" data-v-28815dfd>🔵 钉钉</option><option value="feishu" data-v-28815dfd>🟦 飞书</option><option value="slack" data-v-28815dfd>🟣 Slack</option><option value="discord" data-v-28815dfd>🟪 Discord</option><option value="telegram" data-v-28815dfd>✈️ Telegram</option><option value="bark" data-v-28815dfd>🔔 Bark</option><option value="smtp" data-v-28815dfd>📧 邮件通知</option><option value="custom" data-v-28815dfd>⚙️ 自定义</option>',9)]),8,zs),[[X,r.value.type]]),t[153]||(t[153]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("i",{class:"fas fa-chevron-down text-gray-400"})],-1))]),E.value?(n(),d("p",Ks,t[154]||(t[154]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),o(" 编辑模式下不能更改平台类型 ",-1)]))):y("",!0)]),e("div",null,[t[156]||(t[156]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-tag mr-2 text-gray-400"}),o(" 名称 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),i(e("input",{"onUpdate:modelValue":t[34]||(t[34]=s=>r.value.name=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：运维群通知、开发测试群",type:"text"},null,512),[[x,r.value.name]])]),r.value.type!=="bark"&&r.value.type!=="smtp"&&r.value.type!=="telegram"?(n(),d("div",Fs,[t[160]||(t[160]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-link mr-2 text-gray-400"}),o(" Webhook URL "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),e("div",_s,[i(e("input",{"onUpdate:modelValue":t[35]||(t[35]=s=>r.value.url=s),class:A(["w-full rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",{"border-red-500 focus:border-red-500 focus:ring-red-500/20":Q.value,"border-green-500 focus:border-green-500 focus:ring-green-500/20":N.value}]),placeholder:"https://...",required:"",type:"url",onInput:Ve},null,34),[[x,r.value.url]]),N.value?(n(),d("div",Gs,t[157]||(t[157]=[e("i",{class:"fas fa-check-circle text-green-500"},null,-1)]))):y("",!0),Q.value?(n(),d("div",Hs,t[158]||(t[158]=[e("i",{class:"fas fa-exclamation-circle text-red-500"},null,-1)]))):y("",!0)]),ge(r.value.type)?(n(),d("div",Js,[t[159]||(t[159]=e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"},null,-1)),e("p",Xs,l(ge(r.value.type)),1)])):y("",!0)])):y("",!0),r.value.type==="telegram"?(n(),d("div",Ys,[e("div",null,[e("label",Zs,[t[161]||(t[161]=e("i",{class:"fas fa-robot mr-2 text-gray-400"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.fields.botToken"))+" ",1),t[162]||(t[162]=e("span",{class:"ml-1 text-xs text-red-500"},"*",-1))]),i(e("input",{"onUpdate:modelValue":t[36]||(t[36]=s=>r.value.botToken=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"123456789:ABCDEFghijk-xyz",required:"",type:"text"},null,512),[[x,r.value.botToken]]),e("p",el,l(a.$t("settings.webhook.platforms.fields.botTokenHelp")),1)]),e("div",null,[e("label",tl,[t[163]||(t[163]=e("i",{class:"fas fa-comments mr-2 text-gray-400"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.fields.chatId"))+" ",1),t[164]||(t[164]=e("span",{class:"ml-1 text-xs text-red-500"},"*",-1))]),i(e("input",{"onUpdate:modelValue":t[37]||(t[37]=s=>r.value.chatId=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"123456789 or -1001234567890",required:"",type:"text"},null,512),[[x,r.value.chatId]]),e("p",al,l(a.$t("settings.webhook.platforms.fields.chatIdHelp")),1)]),e("div",null,[e("label",rl,[t[165]||(t[165]=e("i",{class:"fas fa-globe mr-2 text-gray-400"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.fields.apiBaseUrl"))+" ",1),e("span",sl,"("+l(a.$t("common.optional"))+")",1)]),i(e("input",{"onUpdate:modelValue":t[38]||(t[38]=s=>r.value.apiBaseUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"https://api.telegram.org",type:"url"},null,512),[[x,r.value.apiBaseUrl]]),e("p",ll,l(a.$t("settings.webhook.platforms.fields.apiBaseUrlHelp")),1)]),e("div",null,[e("label",ol,[t[166]||(t[166]=e("i",{class:"fas fa-route mr-2 text-gray-400"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.fields.proxyUrl"))+" ",1),e("span",nl,"("+l(a.$t("common.optional"))+")",1)]),i(e("input",{"onUpdate:modelValue":t[39]||(t[39]=s=>r.value.proxyUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"socks5://user:pass@127.0.0.1:1080",type:"text"},null,512),[[x,r.value.proxyUrl]]),e("p",dl,l(a.$t("settings.webhook.platforms.fields.proxyUrlHelp")),1)]),e("div",il,[t[167]||(t[167]=e("i",{class:"fas fa-info-circle mr-2 mt-0.5"},null,-1)),e("div",null,l(a.$t("settings.webhook.platforms.telegram.hint")),1)])])):y("",!0),r.value.type==="bark"?(n(),d("div",ul,[e("div",null,[e("label",gl,[t[168]||(t[168]=e("i",{class:"fas fa-key mr-2 text-gray-400"},null,-1)),o(" "+l(a.$t("settings.webhook.platforms.fields.deviceKey"))+" ",1),t[169]||(t[169]=e("span",{class:"ml-1 text-xs text-red-500"},"*",-1))]),i(e("input",{"onUpdate:modelValue":t[40]||(t[40]=s=>r.value.deviceKey=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"aBcDeFgHiJkLmNoPqRsTuVwX",required:"",type:"text"},null,512),[[x,r.value.deviceKey]]),t[170]||(t[170]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 在Bark App中查看您的推送密钥 ",-1))]),e("div",null,[t[171]||(t[171]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),o(" 服务器地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),i(e("input",{"onUpdate:modelValue":t[41]||(t[41]=s=>r.value.serverUrl=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: https://api.day.app/push",type:"url"},null,512),[[x,r.value.serverUrl]])]),e("div",null,[t[173]||(t[173]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-flag mr-2 text-gray-400"}),o(" 通知级别 ")],-1)),i(e("select",{"onUpdate:modelValue":t[42]||(t[42]=s=>r.value.level=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[172]||(t[172]=[B('<option value="" data-v-28815dfd>自动（根据通知类型）</option><option value="passive" data-v-28815dfd>被动</option><option value="active" data-v-28815dfd>默认</option><option value="timeSensitive" data-v-28815dfd>时效性</option><option value="critical" data-v-28815dfd>紧急</option>',5)]),512),[[X,r.value.level]])]),e("div",null,[t[175]||(t[175]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-volume-up mr-2 text-gray-400"}),o(" 通知声音 ")],-1)),i(e("select",{"onUpdate:modelValue":t[43]||(t[43]=s=>r.value.sound=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[174]||(t[174]=[B('<option value="" data-v-28815dfd>自动（根据通知类型）</option><option value="default" data-v-28815dfd>默认</option><option value="alarm" data-v-28815dfd>警报</option><option value="bell" data-v-28815dfd>铃声</option><option value="birdsong" data-v-28815dfd>鸟鸣</option><option value="electronic" data-v-28815dfd>电子音</option><option value="glass" data-v-28815dfd>玻璃</option><option value="horn" data-v-28815dfd>喇叭</option><option value="silence" data-v-28815dfd>静音</option>',9)]),512),[[X,r.value.sound]])]),e("div",null,[t[176]||(t[176]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-folder mr-2 text-gray-400"}),o(" 通知分组 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),i(e("input",{"onUpdate:modelValue":t[44]||(t[44]=s=>r.value.group=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: claude-relay",type:"text"},null,512),[[x,r.value.group]])]),t[177]||(t[177]=e("div",{class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},[e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"}),e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},[e("p",null,"1. 在iPhone上安装Bark App"),e("p",null,"2. 打开App获取您的设备密钥"),e("p",null,"3. 将密钥粘贴到上方输入框")])],-1))])):y("",!0),r.value.type==="smtp"?(n(),d("div",cl,[e("div",null,[t[178]||(t[178]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),o(" SMTP 服务器 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[45]||(t[45]=s=>r.value.host=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如: smtp.gmail.com",required:"",type:"text"},null,512),[[x,r.value.host]])]),e("div",fl,[e("div",null,[t[179]||(t[179]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-plug mr-2 text-gray-400"}),o(" 端口 ")],-1)),i(e("input",{"onUpdate:modelValue":t[46]||(t[46]=s=>r.value.port=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",max:"65535",min:"1",placeholder:"587",type:"number"},null,512),[[x,r.value.port,void 0,{number:!0}]]),t[180]||(t[180]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 默认: 587 (TLS) 或 465 (SSL) ",-1))]),e("div",null,[t[182]||(t[182]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),o(" 加密方式 ")],-1)),i(e("select",{"onUpdate:modelValue":t[47]||(t[47]=s=>r.value.secure=s),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[181]||(t[181]=[e("option",{value:!1},"STARTTLS (端口587)",-1),e("option",{value:!0},"SSL/TLS (端口465)",-1)]),512),[[X,r.value.secure]])])]),e("div",null,[t[183]||(t[183]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-user mr-2 text-gray-400"}),o(" 用户名 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[48]||(t[48]=s=>r.value.user=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"user@example.com",required:"",type:"email"},null,512),[[x,r.value.user]])]),e("div",null,[t[184]||(t[184]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-lock mr-2 text-gray-400"}),o(" 密码 / 应用密码 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[49]||(t[49]=s=>r.value.pass=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"邮箱密码或应用专用密码",required:"",type:"password"},null,512),[[x,r.value.pass]]),t[185]||(t[185]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 建议使用应用专用密码，而非邮箱登录密码 ",-1))]),e("div",null,[t[186]||(t[186]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-paper-plane mr-2 text-gray-400"}),o(" 发件人邮箱 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),i(e("input",{"onUpdate:modelValue":t[50]||(t[50]=s=>r.value.from=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认使用用户名邮箱",type:"email"},null,512),[[x,r.value.from]])]),e("div",null,[t[187]||(t[187]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-envelope mr-2 text-gray-400"}),o(" 收件人邮箱 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),i(e("input",{"onUpdate:modelValue":t[51]||(t[51]=s=>r.value.to=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"admin@example.com",required:"",type:"email"},null,512),[[x,r.value.to]]),t[188]||(t[188]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"接收通知的邮箱地址",-1))])])):y("",!0),r.value.type==="dingtalk"||r.value.type==="feishu"?(n(),d("div",bl,[e("div",pl,[e("div",ml,[e("label",yl,[i(e("input",{id:"enableSign","onUpdate:modelValue":t[52]||(t[52]=s=>r.value.enableSign=s),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0",type:"checkbox"},null,512),[[q,r.value.enableSign]]),t[189]||(t[189]=e("span",{class:"ml-3 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),o(" 启用签名验证 ")],-1))]),r.value.enableSign?(n(),d("span",xl," 已启用 ")):y("",!0)]),Ue(Ye,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:Xe(()=>[r.value.enableSign?(n(),d("div",vl,[t[190]||(t[190]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 签名密钥 ",-1)),i(e("input",{"onUpdate:modelValue":t[53]||(t[53]=s=>r.value.secret=s),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",placeholder:"SEC...",type:"text"},null,512),[[x,r.value.secret]])])):y("",!0)]),_:1})])])):y("",!0)])]),e("div",kl,[e("div",hl,[t[192]||(t[192]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("i",{class:"fas fa-asterisk mr-1 text-red-500"}),o(" 必填项 ")],-1)),e("div",wl,[e("button",{class:"group flex items-center rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 hover:shadow-md dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",onClick:ee},t[191]||(t[191]=[e("i",{class:"fas fa-times mr-2 transition-transform group-hover:scale-110"},null,-1),o(" 取消 ",-1)])),e("button",{class:"group flex items-center rounded-xl border border-blue-200 bg-blue-50 px-4 py-2.5 text-sm font-medium text-blue-700 shadow-sm transition-all hover:bg-blue-100 hover:shadow-md dark:border-blue-800 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70",disabled:W.value,onClick:Pe},[e("i",{class:A(["mr-2 transition-transform",W.value?"fas fa-spinner fa-spin":"fas fa-vial group-hover:scale-110"])},null,2),o(" "+l(W.value?"测试中...":"测试连接"),1)],8,Sl),e("button",{class:"group flex items-center rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-2.5 text-sm font-medium text-white shadow-md transition-all hover:from-blue-700 hover:to-indigo-700 hover:shadow-lg disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-500",disabled:!Ae.value||L.value,onClick:De},[e("i",{class:A(["mr-2 transition-transform",L.value?"fas fa-spinner fa-spin":"fas fa-save group-hover:scale-110"])},null,2),o(" "+l(L.value?"保存中...":E.value?"保存修改":"添加平台"),1)],8,Cl)])])])]),Ue(bt,{"cancel-text":b.value.cancelText,"confirm-text":b.value.confirmText,message:b.value.message,show:v.value,title:b.value.title,type:b.value.type,onCancel:ae,onConfirm:_},null,8,["cancel-text","confirm-text","message","show","title","type"])])):y("",!0)],64)}}}),Bl=at(Tl,[["__scopeId","data-v-28815dfd"]]);export{Bl as default};
